树链刨分、动态树 也可以解决此类问题 后续尝试下
输入数组离线
就是有的你可以把所有询问全读下来 然后用一些数据结构搞搞 把对应位置的问题回答上,这种叫离线
输入数据在线
在线是你不把这个结果回答完 你都得不到正确的下一组输入数据 
一般采用的方式是将上一轮答案和本轮输入取模或者异或之类的当做本轮真正的输入数据

试试st-RMQ直接O(1)返回最大权值,而不是返回lca编号的做法.代码在kruskal重构树 libreoj 137 上

